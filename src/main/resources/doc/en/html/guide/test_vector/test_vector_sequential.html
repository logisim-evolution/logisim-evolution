<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html lang="en">
<head>
	<META name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="created" content="2018-10-23T06:18:10.521000000"/>
	<meta name="changed" content="2018-10-23T06:18:42.262000000"/>
	<META http-equiv="content-type" content="text/html; charset=UTF-8">
	<META http-equiv="Content-Language" content="en">
	<title>Sequential Testing</title>
	<link rel="stylesheet" type="text/css" href="../../style.css">
	<link rel="stylesheet" type="text/css" href="codefix.css">
</head>
<body>

<h1>Sequential Testing</h1>

<p>The Test Vector feature supports both <strong>combinational</strong> and
<strong>sequential</strong> circuit testing. By default, tests are combinational:
the circuit is reset before each test, ensuring each test is independent.</p>

<p>For sequential circuits, you can specify test sequences using the special
<code>&lt;set&gt;</code> and <code>&lt;seq&gt;</code> header columns:</p>

<ul>
<li><strong>&lt;set&gt;</strong>: Defines the <strong>sequence ID</strong> - tests with the same set number
belong to the same sequence and run together. The circuit state is preserved between steps
in the same set. Tests default to set 0 if not specified.</li>
<li><strong>&lt;seq&gt;</strong>: Defines the <strong>step number</strong> within a set - this determines
the execution order of tests within the same set. Tests are executed in order of their
<code>&lt;seq&gt;</code> value within each <code>&lt;set&gt;</code>. Tests with <code>&lt;seq&gt;</code> of 0
or missing are treated as combinational (circuit resets between tests, even if they share
the same set).</li>
</ul>

<p>Here is an example of a sequential test vector:</p>
<pre class="code">
# Sequential test for a counter
Clock Reset Count &lt;set&gt; &lt;seq&gt;
0     0     0     1     1
1     0     0     1     2
0     0     1     1     3
1     0     1     1     4
0     0     2     1     5
1     0     2     1     6
0     1     0     2     1
</pre>

<p>In this example, the first six tests all have <code>&lt;set&gt; 1</code> with <code>&lt;seq&gt;</code>
values 1-6, so they form one sequence that runs in order (seq 1, then 2, then 3, etc.)
without resetting between steps. The last test has <code>&lt;set&gt; 2</code>, so it starts
a new sequence and the circuit is reset before it runs. Note also that Clock could be an input pin here. But it could also be a labeled clock component (see below).</p>

<h2>Sequence Execution Rules</h2>

<ul>
<li>Tests with the same <code>&lt;set&gt;</code> number (&gt; 0) belong to the same sequence.</li>
<li>Within each set, tests are executed in order of their <code>&lt;seq&gt;</code> value (seq 1, then 2, then 3, etc.)</li>
<li>The circuit state is maintained between tests in the same set (same set ID)</li>
<li>The circuit is reset when starting a new set (different <code>&lt;set&gt;</code> number)</li>
<li>Tests with <code>&lt;seq&gt;</code> = 0 or missing must also have <code>&lt;set&gt;</code> = 0 or missing and are always combinational (reset between tests)</li>
</ul>

<h2>Using the Clock</h2>

<p>In a sequential test, the first step begins with a reset. In every step after the first, it begins with a simulation tick. Any Clock components in the simulation will be updated by that tick and their signals will be propagated along with any input pin values for that step. You may add a column to the test to show the ticks. The column will be checked against the clock in the circuit as if it were an output pin to verify it describes the clocks behavior. Here is an example for a simple positive edge-triggered D flip-flop test with a standard clock:</p>

<pre class="code">
&lt;clk&gt; D Q NotQ  &lt;set&gt; &lt;seq&gt;
  0   0 0   1     1     1
  1   0 0   1     1     2
  0   1 0   1     1     3
  1   1 1   0     1     4
  0   1 1   0     1     5
  1   1 1   0     1     6
  0   0 1   0     1     7
</pre>

<p>The <code>&lt;clk&gt;</code> header is a special name for an unlabeled clock component. You may also label the clock and use the label as the column header (see earlier example).</p>

<p>We recommend that when using a clock, you should not change the values of memory inputs during the same step that the clock makes a triggering transition. Doing so may allow an input signal to reach the component at near the same time as the clock giving surprising behavior. In the example above, the D input does not change in steps with a rising edge of the clock.</p>

<h2>Complete Example</h2>

<p>Here is a complete example combining all features:</p>
<pre class="code">
# Mixed combinational and sequential tests
A B C Out     &lt;clk&gt; &lt;set&gt; &lt;seq&gt;
0 0 0 0       0     0     0
0 0 1 1       0     0     0
1 1 0 1       0     1     1
0 1 0 0       1     1     2
1 1 1 1       0     1     3
0 0 0 &lt;DC&gt;    0     2     1
1 0 1 &lt;float&gt; 1     2     2
</pre>

<p>In this example:
<ul>
<li>Notice how the clock resets to 0 in each line that does a reset.</li>
<li>The first two tests are combinational (seq=0), so the circuit resets
between each test, even though they share set 0.</li>
<li>The next three tests all have set 1 with seq values 1-3, so they form one sequence
that runs in order without reset between each other only resetting before the first test in the set runs.</li>
<li>The last test has set 2 seq 1&2, so it starts a new sequence and the circuit resets before it runs but not between tests in the set.</li>
<li>The sixth test uses <code>&lt;DC&gt;</code> for the output, so any output value passes.</li>
<li>The last test uses <code>&lt;float&gt;</code> for the output, expecting a floating value.</li>
</ul>
</p>

<p> Thus the execution might look like this:
<ol>
<li>Reset the circuit to fresh state</li>
<li>set A=0, B=0, C=0 and check that Out==0</li>
<li>Reset the circuit to fresh state</li>
<li>set A=0, B=0, C=1 and check that Out==1</li>
<li>Reset the circuit to fresh state</li>
<li>set A=1, B=1, C=0 and check that Out==1</li>
<li>set A=0, B=1, C=0 and check that Out==0</li>
<li>set A=1, B=1, C=1 and check that Out==1</li>
<li>Reset the circuit to fresh state</li>
<li>set A=0, B=0, C=0 and not check Out</li>
<li>set A=0, B=1, C=0 and make sure that Out is floating (in Logisim this is notated as U)</li>
<li>Test Vector is complete</li>
</ol>
</p>

<p>
	<b>Previous:</b> <a href="test_vector_special_values.html">Special Values</a> | <b>Next:</b> <a href="test_vector_cmdline.html">Command Line Usage</a>.
</p>

</body>
</html>
